{% extends 'shared/_layout.html' %}


{% block title %}
    جزییات محصول
{% endblock %}


{% block content %}
    <section class="content">
        <div class="container-fluid">
            <div class="content-box">
                <div class="container-fluid">
                    <div class="row gy-3">
                        <div class="col-xl-4 col-lg-3">
                            <div class="pro_gallery">
                                <div class="swiper product-gallery">
                                    <div class="swiper-wrapper" title="برای بزرگنمایی تصویر دابل کلیک کنید">
                                        {% for foo in product_gallery %}
                                            <div class="swiper-slide">
                                                <img class="img-fluid" src="{{ foo.image.url }}"
                                                     alt=""/>
                                            </div>
                                        {% endfor %}
                                    </div>
                                    <div class="swiper-pagination d-none d-lg-block"></div>
                                </div>
                                <div class="swiper product-gallery-thumb">
                                    <div class="swiper-wrapper">
                                        {% for foo in product_gallery %}
                                            <div class="swiper-slide">
                                                <img class="img-fluid" src="{{ foo.image.url }}"
                                                     alt=""/>
                                            </div>
                                        {% endfor %}

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-8 col-lg-9">
                            <div class="product-meta-title">
                                <div class="row align-items-center gy-3">
                                    <div class="col-lg-8">
                                        <h5 class="font-16">
                                            {{ product.title }}
                                        </h5>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="d-flex justify-content-end align-items-center">
                                            <a href="">
                                                <img src="/assets/image/brand/xiaomi.png" alt="" class="img-fluid">
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% if product.is_mobile %}
                                <div class="product-meta-rating my-3">
                                    <div class="d-flex align-items-center">
                                        <a class="badge danger-label btn btn-lg rounded-pill font-16">تلفن هوشمند</a>
                                    </div>
                                </div>
                            {% endif %}
                            <div class="row gy-4 my-4">
                                <div class="col-lg-8">
                                    <div class="product-meta-feature-items">
                                        <h5 class="title font-16 mb-2 icon-circle">ویژگی های کالا</h5>
                                        <ul class="navbar-nav">
                                            <li class="nav item"><span>نوع اتصال:</span><strong>با سیم</strong></li>
                                            <li class="nav item"><span>رابط ها:</span><strong>3.5 میلیمتری</strong></li>
                                            <li class="nav item"><span>مقدار رم :</span><strong>8 گیگابایت</strong></li>
                                            <li class="nav item"><span>نوع گوشی:</span><strong>دوگوشی</strong></li>
                                            <li class="nav item">
                                                <span>رنگ های موجود:</span><strong>{{ product.colors }}</strong></li>
                                        </ul>
                                    </div>

                                </div>
                                <div class="col-lg-4">
                                    <div class="d-flex flex-column">
                                        <div class="bs-bg-gray-200 mb-3 rounded-3 py-3 border border-dark-subtle d-flex align-items-center justify-content-center">
                                            <img src="/assets/image/feature/fast.png" class="w-40-px" alt="">
                                            <h6 class="fw-bold ms-4">ارســال رایــگان</h6>
                                        </div>
                                        <div class="bs-bg-gray-200 mb-3 rounded-3 py-3 border border-dark-subtle d-flex align-items-center justify-content-center">
                                            <img src="/assets/image/feature/badge.png" class="w-40-px" alt="">
                                            <h6 class="fw-bold ms-4">ضمــانــت اصــالــت کالا</h6>
                                        </div>
                                        <div class="bs-bg-gray-200 mb-3 rounded-3 py-3 border border-dark-subtle d-flex flex-column align-items-center justify-content-center">
                                            {% if product.off %}
                                                <h6 class="fw-bold h3 d-flex align-items-center ms-4">{{ product.off_price }}<span
                                                        class="h6 ms-2 fw-normal">تومان</span>
                                                </h6>
                                                <h6 class="fw-bold h6 d-flex align-items-center ms-4">
                                                    <del>{{ product.price }}</del>
                                                    <span
                                                            class="h6 ms-2 fw-normal">تومان</span>
                                                </h6>
                                            {% else %}
                                                <h6 class="fw-bold h3 d-flex align-items-center ms-4">{{ product.price }}<span
                                                        class="h6 ms-2 fw-normal">تومان</span>
                                                </h6>
                                            {% endif %}
                                            <form action=""
                                                  class="w-100 d-flex flex-column justify-content-center align-items-center mt-3">
                                                <div class="counter">
                                                    <label>تعداد :</label>
                                                    <input type="number" id="product_count" name="count"
                                                           class="form-control" min="1" value="1">

                                                </div>
                                                <div class="product-meta-color mt-4">
                                                    <h5 class="font-16 icon-circle">
                                                        انتخاب رنگ کالا
                                                    </h5>
                                                    <label>لطفا شماره رنگ را وارد کنید :</label>
                                                    <input type="text" id="product_color" name="count"
                                                           class="form-control">
                                                </div>
                                                <a onclick="add_to_order({{ product.id }})"
                                                   class="btn main-color-green btn-add-to-cart text-white  mt-3"><i
                                                        class="bi bi-basket me-3 lh-sm fs-4"></i> افزودن به سبد خرید
                                                </a>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--============ end main content ==============-->

    <!--============ start product description ==============-->

    <section class="product-desc my-3">
        <div class="container-fluid">
            <div class="product-desc-tab">
                <ul class="nav justify-content-between" id="productTab" role="tablist">
                    <li class="nav-item">
                        <button aria-selected="true" class="active waves-effect waves-light"
                                data-bs-target="#productDescLess-pane" data-bs-toggle="tab" id="productDescLess"
                                role="button" type="button">
                            توضیحات کالا
                        </button>
                    </li>
                    <li class="nav-item">
                        <button aria-selected="false" class="d-flex waves-effect waves-light"
                                data-bs-target="#productComment-pane" data-bs-toggle="tab" id="productComment"
                                role="button" type="button">
                            نظرات <span class="badge main-color-two-bg ms-2 lh-sm">{{ comments_count }}</span>
                        </button>
                    </li>
                </ul>
            </div>
            <div class="row mt-4 pt-2">
                <div class="col-xl-9">
                    <div class="content-box">
                        <div class="container-fluid">
                            <div class="product-descs" id="prodesc">
                                <div class="product-desc">
                                    <div class="product-desc-tab-content">
                                        <div class="tab-content" id="productTabContent">
                                            <div class="tab-pane fade show active product-desc-less-contents"
                                                 id="productDescLess-pane">
                                                <div class="product-desc-content">
                                                    <h6 class="font-22 mb-2 title-font title-line-bottom">معرفی
                                                        محصول</h6>

                                                    <p>{{ product.description }}</p>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade product-comment-content" id="productComment-pane">

                                                <div class="comment-form">
                                                    <h6 class="font-26 mb-2 title-font title-line-bottom">نظرت در مورد
                                                        این
                                                        محصول
                                                        چیه؟</h6>
                                                    <form action="">
                                                        <div class="row gy-4">
                                                            <div class="col-md-8">
                                                                <div class="row">
                                                                    <div class="col-12">
                                                                        <div class="form-floating">
                                                                        <textarea class="form-control"
                                                                                  id="product_comment_text"
                                                                                  placeholder="Leave a comment here"
                                                                                  style="height: 150px"></textarea>
                                                                            <label for="floatingTextarea2">متن
                                                                                نظر!</label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-12">
                                                                        <br>
                                                                        <button onclick="sendProductComment({{ product.id }})"
                                                                                type="submit"
                                                                                class="btn main-color-two-bg px-5 btn-lg border-0">
                                                                            ثبت نظر
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="box_filter mt-5 pb-3">
                                                    <div class="row align-items-end">
                                                        <div class="col-md-4 bf1">
                                                            <h4 class="title-font title-line-bottom">نظرات کاربران</h4>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="box_users_comment mt-3 p-4">
                                                    <div class="row">
                                                        {% for comment in comments %}
                                                            <div class="col-lg-9 pr-5 " style="margin-top:20px">

                                                                <div class="box_comment_header mt-4 mt-lg-0">
                                                                    <span class="span2">توسط {{ comment.user }} در تاریخ {{ comment.date }} نوشته شد </span>
                                                                </div>
                                                                <div class="border-bottom mt-3"></div>
                                                                <div class="row mt-4">
                                                                    <div class="col-md-12">
                                                                        <p class="box_text_comment">
                                                                            {{ comment.comment }}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        {% endfor %}

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--============ end product description ==============-->

    <!--============ start product slider ==============-->

    <section class="product-slider  site-slider">
        <div class="container-fluid">
            <div class="product-slider-box-title">
                <div class="row align-items-center">
                    <div class="col-lg-8 col-6">
                        <h4 class="title-font product-slider-box-title-title dot">
                            <span class="main-color-one-color">محصولات</span>
                            <span>مرتبط</span>
                        </h4>
                    </div>
                    <div class="col-lg-4 col-6">
                        <div class="text-end">
                            <a href="" class="btn main-color-one-bg rounded-3">مشاهده همه</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper pro-slider">
                <div class="swiper-wrapper align-items-center">
                    {% for related_product in related_products %}
                        <div class="swiper-slide">
                            <div class="product-box">
                                <div class="product-image">
                                    <img alt="" class="img-fluid"
                                         src="{{ related_product.image.url }}">
                                </div>
                                <div class="product-title">
                                    <div class="title">
                                        <p class="title-font font-14">{{ related_product.title }}</p>
                                    </div>
                                </div>
                                <div class="product-action flex-column mt-3">
                                    <div class="price d-flex justify-content-between w-100 align-items-baseline">
                                        <p class="new-price">3,175,000 <span class="font-12">تومان</span></p>
                                        <p class="old-price">6,500,000 </p>
                                    </div>
                                    <div class="link w-100 mt-4 d-flex align-items-center justify-content-between">
                                        <a class="btn border-0 d-flex align-items-center rounded-3 main-color-one-bg"
                                           href="{% url 'product_detail' slug=related_product.slug  %}">
                                            مشاهده
                                            <i class="bi bi-arrow-left ms-4 text-white"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}

                </div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
        </div>
    </section>

{% endblock %}
